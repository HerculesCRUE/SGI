<sgi-fragment title="{{'csp.ejecucion-economica.proyectos' | translate}}">

  <div class="mat-elevation-z4">
    <table mat-table [dataSource]="dataSource" matSort matSortActive="id" matSortDirection="asc" matSortDisableClear>

      <!-- Titulo Column -->
      <ng-container matColumnDef="proyecto.titulo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.titulo' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.proyecto?.titulo}}
        </td>
      </ng-container>

      <!-- Acronimo Column -->
      <ng-container matColumnDef="proyecto.acronimo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.acronimo' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.proyecto?.acronimo}}
        </td>
      </ng-container>

      <!-- Fecha inicio Column -->
      <ng-container matColumnDef="proyecto.fechaInicio">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.fecha-inicio' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.proyecto?.fechaInicio | luxon:'shortDate'}}
        </td>
      </ng-container>

      <!-- Fecha fin Column -->
      <ng-container matColumnDef="proyecto.fechaFin">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.fecha-fin' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.proyecto?.fechaFin | luxon:'shortDate'}}
        </td>
      </ng-container>

      <!-- Estado proyecto Column -->
      <ng-container matColumnDef="proyecto.estado.estado">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.estado-proyecto' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{ESTADO_MAP.get(element.proyecto?.estado?.estado) | translate}}
        </td>
      </ng-container>

      <!-- Porcentaje IVA Column -->
      <ng-container matColumnDef="proyecto.iva.iva">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.iva' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.proyecto?.iva?.iva}}
        </td>
      </ng-container>

      <!-- Causa exencion Column -->
      <ng-container matColumnDef="proyecto.causaExencion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.causa-exencion' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{CAUSA_EXENCION_MAP.get(element.proyecto?.causaExencion) | translate}}
        </td>
      </ng-container>

      <!-- Identificador SGE Column -->
      <ng-container matColumnDef="proyectoSgeRef">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.identificador-sge' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.proyectoSge?.id}}
        </td>
      </ng-container>

      <!-- Sector IVA Column -->
      <ng-container matColumnDef="proyectoSge.sectorIva">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.ejecucion-economica.sector-iva' | translate}}
        </th>
        <td mat-cell *matCellDef="let element">
          {{element.proyectoSge.sectorIva === undefined ? ''
          : ((element.proyectoSge.sectorIva ? 'label.si' : 'label.no') | translate)}}
        </td>
      </ng-container>

      <!-- Acciones Column -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef> {{'label.actions' | translate}} </th>
        <td mat-cell *matCellDef="let element">
          <ng-container>
            <button mat-button matTooltip="{{'btn.view' | translate}}"
              [routerLink]="['../../..', CSP_ROUTE_NAMES.PROYECTO, element.proyecto.id]">
              <mat-icon color="primary">visibility</mat-icon>
            </button>

          </ng-container>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
    <mat-paginator [pageSizeOptions]="elementosPagina" showFirstLastButtons>
    </mat-paginator>
  </div>
</sgi-fragment>