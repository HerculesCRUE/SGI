<sgi-fragment title="{{'label.datos-generales' | translate}}">
  <form [formGroup]="formGroup" [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
    [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">
    <!--Estado-->
    <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
      [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">
      <mat-form-field>
        <mat-label>{{'csp.autorizacion.estado' | translate}}</mat-label>
        <sgi-select-enum formControlName="estado" required [enumMap]="ESTADO_MAP">
        </sgi-select-enum>
        <mat-error *ngIf="formGroup.controls.estado.errors?.required">
          {{ 'error.required.entity' | translate:msgParamEstadoEntity }}
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Titulo -->
    <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
      [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">
      <mat-form-field class="input-form">
        <mat-label>{{'csp.autorizacion.titulo-proyecto' | translate}}</mat-label>
        <input matInput formControlName="tituloProyecto" required type="text" id="tituloProyecto"
          placeholder="{{'csp.autorizacion.titulo-proyecto' | translate}}">
        <mat-error *ngIf="formGroup.controls.tituloProyecto.errors?.maxlength">
          {{ 'error.maxlength.entity' | translate:msgParamTituloEntity }}
        </mat-error>
        <mat-error *ngIf="formGroup.controls.tituloProyecto.errors?.required">
          {{ 'error.required.entity' | translate:msgParamTituloEntity }}
        </mat-error>
      </mat-form-field>
    </div>
    <ng-container *ngIf="this.formPart.isInvestigador">


      <!--Convocatoria-->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.autorizacion.convocatoria' | translate}}</mat-label>
          <sgi-select-convocatoria placeholder="{{'csp.autorizacion.convocatoria' | translate}}"
            formControlName="convocatoria" investigador="true">
          </sgi-select-convocatoria>
        </mat-form-field>
      </div>

      <!-- Datos Convocatoria -->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">

        <div
          *ngIf="!formGroup.controls.convocatoria.value && (formGroup.controls.estado.value == 'BORRADOR' || !this.formPart.isEdit())"
          class="info-message">
          <mat-icon class="info-icon">info</mat-icon>
          {{'csp.autorizacion.info-datos-convocatoria' | translate}}
        </div>

        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.datos-convocatoria' | translate}}</mat-label>
          <input matInput formControlName="datosConvocatoria" type="text" id="datosConvocatoria"
            placeholder="{{'csp.autorizacion.datos-convocatoria' | translate}}">
          <mat-error *ngIf="formGroup.controls.datosConvocatoria.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamDatosConvocatoriaEntity }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Entidad con la que participa -->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.entidad-participa' | translate}}</mat-label>
          <sgi-select-empresa placeholder="{{'csp.autorizacion.entidad-participa' | translate}}"
            formControlName="entidadParticipa" [required]="this.formPart.entidadRequired">
          </sgi-select-empresa>
          <sgi-field-info matSuffix message="{{'csp.autorizacion.entidad-participa' | translate}}">
          </sgi-field-info>
          <mat-error *ngIf="formGroup.controls.entidadParticipa.errors?.required">
            {{ 'error.required.entity' | translate:msgParamEntidadParticipaEntity }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Datos de la entidad con la que participa  -->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">

        <div
          *ngIf="!formGroup.controls.entidadParticipa.value && (formGroup.controls.estado.value == 'BORRADOR' || !this.formPart.isEdit())"
          class="info-message">
          <mat-icon class="info-icon">info</mat-icon>
          {{'csp.autorizacion.info-datos-entidad' | translate}}
        </div>

        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.datos-entidad' | translate}}</mat-label>
          <input matInput formControlName="datosEntidad" type="text" id="datosEntidad"
            placeholder="{{'csp.autorizacion.datos-entidad' | translate}}" [required]="!this.formPart.entidadRequired">
          <mat-error *ngIf="formGroup.controls.datosEntidad.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamDatosEntidadEntity}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.datosEntidad.errors?.required">
            {{ 'error.required.entity' | translate:msgParamDatosEntidadEntity }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Investigador Principal-->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field fxFill>
          <mat-label>{{'csp.autorizacion.investigador-principal' | translate}}</mat-label>
          <sgi-select-persona placeholder="{{'csp.autorizacion.investigador-principal' | translate}}"
            formControlName="investigadorPrincipalProyecto" [required]="this.formPart.investigadorRequired">
          </sgi-select-persona>
          <mat-error *ngIf="formGroup.controls.investigadorPrincipalProyecto.errors?.required">
            {{'error.required.entity' | translate:msgParamInvestigadorPrincipalEntity}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Datos Ip Proyecto -->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">

        <div
          *ngIf="!formGroup.controls.investigadorPrincipalProyecto.value && (formGroup.controls.estado.value == 'BORRADOR' || !this.formPart.isEdit())"
          class="info-message">
          <mat-icon class="info-icon">info</mat-icon>
          {{'csp.autorizacion.info-datos-investigador'|translate}}
        </div>

        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.datos-ip-proyecto' | translate}}</mat-label>
          <input matInput formControlName="datosIpProyecto" type="text" id="datosIpProyecto"
            placeholder="{{'csp.autorizacion.datos-ip-proyecto' | translate}}"
            [required]="!this.formPart.investigadorRequired">
          <mat-error *ngIf="formGroup.controls.datosIpProyecto.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamDatosIpProyectoEntity }}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.datosIpProyecto.errors?.required">
            {{'error.required.entity' | translate:msgParamDatosIpProyectoEntity}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Horas dedicacion -->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">

        <div *ngIf="(formGroup.controls.estado.value == 'BORRADOR' || !this.formPart.isEdit())" class="info-message">
          <mat-icon class="info-icon">info</mat-icon>
          {{'csp.autorizacion.info-horas-dedicacion' | translate}}
        </div>

        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.horas-dedicacion' | translate}}</mat-label>
          <input matInput formControlName="horasDedicacion" type="number" id="horasDedicacion"
            placeholder="{{'csp.autorizacion.horas-dedicacion' | translate}}">
          <mat-error *ngIf="formGroup.controls.horasDedicacion.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamHorasDedicacionEntity }}
          </mat-error>
        </mat-form-field>
      </div>
    </ng-container>

    <ng-container *ngIf="!this.formPart.isInvestigador">
      <!--Convocatoria-->
      <div [fxFlex]="45" [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.autorizacion.convocatoria' | translate}}</mat-label>
          <sgi-select-convocatoria placeholder="{{'csp.autorizacion.convocatoria' | translate}}"
            formControlName="convocatoria">
          </sgi-select-convocatoria>
        </mat-form-field>
      </div>

      <!-- Datos Convocatoria -->
      <div [fxFlex]="45" [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.datos-convocatoria' | translate}}</mat-label>
          <input matInput formControlName="datosConvocatoria" type="text" id="datosConvocatoria"
            placeholder="{{'csp.autorizacion.datos-convocatoria' | translate}}">
          <mat-error *ngIf="formGroup.controls.datosConvocatoria.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamDatosConvocatoriaEntity }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Entidad con la que participa -->
      <div [fxFlex]="45" [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.entidad-participa' | translate}}</mat-label>
          <sgi-select-empresa placeholder="{{'csp.autorizacion.entidad-participa' | translate}}"
            formControlName="entidadParticipa" [required]="this.formPart.entidadRequired">
          </sgi-select-empresa>
          <sgi-field-info matSuffix message="{{'csp.autorizacion.entidad-participa' | translate}}">
          </sgi-field-info>
          <mat-error *ngIf="formGroup.controls.entidadParticipa.errors?.required">
            {{ 'error.required.entity' | translate:msgParamEntidadParticipaEntity }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Datos de la entidad con la que participa  -->
      <div [fxFlex]="45" [fxFlexOrder]="fxFlexProperties.order">

        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.datos-entidad' | translate}}</mat-label>
          <input matInput formControlName="datosEntidad" type="text" id="datosEntidad"
            placeholder="{{'csp.autorizacion.datos-entidad' | translate}}" [required]="!this.formPart.entidadRequired">
          <mat-error *ngIf="formGroup.controls.datosEntidad.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamDatosEntidadEntity}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.datosEntidad.errors?.required">
            {{ 'error.required.entity' | translate:msgParamDatosEntidadEntity }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Investigador Principal-->
      <div [fxFlex]="45" [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field fxFill>
          <mat-label>{{'csp.autorizacion.investigador-principal' | translate}}</mat-label>
          <sgi-select-persona placeholder="{{'csp.autorizacion.investigador-principal' | translate}}"
            formControlName="investigadorPrincipalProyecto" [required]="this.formPart.investigadorRequired">
          </sgi-select-persona>
          <mat-error *ngIf="formGroup.controls.investigadorPrincipalProyecto.errors?.required">
            {{'error.required.entity' | translate:msgParamInvestigadorPrincipalEntity}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Datos Ip Proyecto -->
      <div [fxFlex]="45" [fxFlexOrder]="fxFlexProperties.order">

        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.datos-ip-proyecto' | translate}}</mat-label>
          <input matInput formControlName="datosIpProyecto" type="text" id="datosIpProyecto"
            placeholder="{{'csp.autorizacion.datos-ip-proyecto' | translate}}"
            [required]="!this.formPart.investigadorRequired">
          <mat-error *ngIf="formGroup.controls.datosIpProyecto.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamDatosIpProyectoEntity }}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.datosIpProyecto.errors?.required">
            {{'error.required.entity' | translate:msgParamDatosIpProyectoEntity}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Horas dedicacion -->
      <div [fxFlex.sm]="fxFlexProperties2.gtMd" [fxFlex.md]="fxFlexProperties2.gtMd"
        [fxFlex.gt-md]="fxFlexProperties2.gtMd" [fxFlexOrder]="fxFlexProperties.order">

        <mat-form-field class="input-form">
          <mat-label>{{'csp.autorizacion.horas-dedicacion' | translate}}</mat-label>
          <input matInput formControlName="horasDedicacion" type="number" id="horasDedicacion"
            placeholder="{{'csp.autorizacion.horas-dedicacion' | translate}}">
          <mat-error *ngIf="formGroup.controls.horasDedicacion.errors?.maxlength">
            {{ 'error.maxlength.entity' | translate:msgParamHorasDedicacionEntity }}
          </mat-error>
        </mat-form-field>
      </div>
    </ng-container>

    <!-- Observaciones -->
    <div [fxFlex.sm]="fxFlexProperties2.sm" [fxFlex.md]="fxFlexProperties2.md" [fxFlex.gt-md]="fxFlexProperties2.gtMd"
      [fxFlexOrder]="fxFlexProperties.order">
      <mat-form-field fxFill>
        <mat-label>{{'csp.autorizacion.observaciones' | translate}}</mat-label>
        <textarea matInput formControlName="observaciones" type="text" id="observaciones"
          placeholder="{{'csp.convocatoria.observaciones' | translate}}">
            </textarea>
        <mat-error *ngIf="formGroup.controls.observaciones.errors?.maxlength">
          {{ 'error.maxlength.entity' | translate:msgParamObservacionesEntity }}
        </mat-error>
      </mat-form-field>
    </div>
  </form>
</sgi-fragment>