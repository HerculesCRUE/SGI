<!-- Convocatoria concepto-gasto -->
<sgi-fragment title="{{'csp.convocatoria-elegibilidad' | translate}}">

  <h3>{{'csp.convocatoria-concepto-gasto-permitido' | translate: MSG_PARAMS.CARDINALIRY.PLURAL}}</h3>
  <div class="mat-elevation-z4">
    <table mat-table [dataSource]="dataSourcePermitidos" matSort matSortDisableClear #sortPermitidos="matSort">
      <!-- Nombre concepto gasto -->
      <ng-container matColumnDef="conceptoGasto.nombre">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.nombre' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.conceptoGasto.nombre}}
        </td>
      </ng-container>

      <!-- Descripci칩n -->
      <ng-container matColumnDef="conceptoGasto.descripcion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.descripcion' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper">
          {{wrapper.value.conceptoGasto.descripcion}}
        </td>
      </ng-container>

      <!--Costes indirectos-->
      <ng-container matColumnDef="conceptoGasto.costesIndirectos">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-elegibilidad-concepto-gasto.costes-indirectos' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper">
          {{wrapper.value.conceptoGasto.costesIndirectos ? ('label.si' | translate) : ('label.no' | translate)}} </td>
      </ng-container>

      <!-- Importe m치ximo -->
      <ng-container matColumnDef="importeMaximo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.importe-maximo' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.importeMaximo | number: '1.2-2'}}
        </td>
      </ng-container>

      <!-- Porcentaje m치ximo -->
      <ng-container matColumnDef="porcentajeMaximo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.porcentaje-maximo' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.porcentajeMaximo | number: '1.2-2'}}
        </td>
      </ng-container>

      <!-- Mes inicial -->
      <ng-container matColumnDef="mesInicial">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.mes-inicial' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.mesInicial}}
        </td>
      </ng-container>

      <!-- Mes final -->
      <ng-container matColumnDef="mesFinal">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.mes-final' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.mesFinal}}
        </td>
      </ng-container>

      <!-- Observaciones -->
      <ng-container matColumnDef="observaciones">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.observaciones' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.observaciones}}
        </td>
      </ng-container>

      <!-- Acciones Column -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef> {{'label.actions' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper">
          <button mat-icon-button color="primary" matTooltip="{{'btn.view' | translate}}" *ngIf="!formPart.canEdit"
            [routerLink]="['../', CONVOCATORIA_ROUTE_NAMES.CONCEPTO_GATO_PERMITIDO, wrapper.value.id]">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button color="primary" matTooltip="{{'btn.edit' | translate}}" *ngIf="formPart.canEdit"
            [routerLink]="['../', CONVOCATORIA_ROUTE_NAMES.CONCEPTO_GATO_PERMITIDO, wrapper.value.id]">
            <mat-icon>border_color</mat-icon>
          </button>
          <button mat-icon-button color="warn" matTooltip="{{'btn.delete' | translate}}" *ngIf="formPart.canEdit"
            (click)="deleteConvocatoriaConceptoGasto(wrapper, true)">
            <mat-icon>highlight_off</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsPermitidos"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsPermitidos"></tr>

    </table>

    <mat-paginator #paginatorPermitidos [pageSizeOptions]="elementosPagina" showFirstLastButtons>
    </mat-paginator>
  </div>
  <div class="separation-button" *ngIf="formPart.canEdit">
    <button color="three" aria-label="Center Align" mat-raised-button
      [routerLink]="['../', CONVOCATORIA_ROUTE_NAMES.CONCEPTO_GATO_PERMITIDO, ROUTE_NAMES.NEW]"
      [disabled]="!this.formPart.getKey()">
      <mat-icon color="accent">add_circle</mat-icon>
      {{ 'btn.add.entity' | translate:msgParamEntityPermitido }}
    </button>
    <sgi-field-info matSuffix class="mat-icon-button" [visible]="!this.formPart.getKey()"
      message="{{'csp.convocatoria-concepto-gasto.msg' | translate}}">
    </sgi-field-info>
  </div>

  <mat-divider></mat-divider>

  <h3>{{'csp.convocatoria-concepto-gasto-no-permitido' | translate: MSG_PARAMS.CARDINALIRY.PLURAL}}</h3>
  <div class="mat-elevation-z4">
    <table mat-table [dataSource]="dataSourceNoPermitidos" matSort matSortDisableClear #sortNoPermitidos="matSort">

      <!-- Nombre concepto gasto -->
      <ng-container matColumnDef="conceptoGasto.nombre">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.nombre' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.conceptoGasto.nombre}}
        </td>
      </ng-container>

      <!-- Descripci칩n -->
      <ng-container matColumnDef="conceptoGasto.descripcion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.descripcion' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper">
          {{wrapper.value.conceptoGasto.descripcion}}
        </td>
      </ng-container>

      <!--Costes indirectos-->
      <ng-container matColumnDef="conceptoGasto.costesIndirectos">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-elegibilidad-concepto-gasto.costes-indirectos' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper">
          {{wrapper.value.conceptoGasto.costesIndirectos ? ('label.si' | translate) : ('label.no' | translate)}} </td>
      </ng-container>

      <!-- Mes inicial -->
      <ng-container matColumnDef="mesInicial">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.mes-inicial' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.mesInicial}}
        </td>
      </ng-container>

      <!-- Mes final -->
      <ng-container matColumnDef="mesFinal">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.mes-final' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.mesFinal}}
        </td>
      </ng-container>

      <!-- Observaciones -->
      <ng-container matColumnDef="observaciones">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'csp.convocatoria-concepto-gasto.observaciones' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper"> {{wrapper.value.observaciones}}
        </td>
      </ng-container>

      <!-- Acciones Column -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef> {{'label.actions' | translate}} </th>
        <td mat-cell *matCellDef="let wrapper">
          <button mat-icon-button color="primary" matTooltip="{{'btn.view' | translate}}" *ngIf="!formPart.canEdit"
            [routerLink]="['../', CONVOCATORIA_ROUTE_NAMES.CONCEPTO_GATO_NO_PERMITIDO, wrapper.value.id]">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button color="primary" matTooltip="{{'btn.edit' | translate}}" *ngIf="formPart.canEdit"
            [routerLink]="['../', CONVOCATORIA_ROUTE_NAMES.CONCEPTO_GATO_NO_PERMITIDO, wrapper.value.id]">
            <mat-icon>border_color</mat-icon>
          </button>
          <button mat-icon-button color="warn" matTooltip="{{'btn.delete' | translate}}" *ngIf="formPart.canEdit"
            (click)="deleteConvocatoriaConceptoGasto(wrapper, false)">
            <mat-icon>highlight_off</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsNoPermitidos"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsNoPermitidos"></tr>

    </table>

    <mat-paginator #paginatorNoPermitidos [pageSizeOptions]="elementosPagina" showFirstLastButtons>
    </mat-paginator>
  </div>
  <div class="separation-button" *ngIf="formPart.canEdit">
    <button color="three" aria-label="Center Align" mat-raised-button
      [routerLink]="['../', CONVOCATORIA_ROUTE_NAMES.CONCEPTO_GATO_NO_PERMITIDO, ROUTE_NAMES.NEW]"
      [disabled]="!this.formPart.getKey()">
      <mat-icon color="accent">add_circle</mat-icon>
      {{ 'btn.add.entity' | translate:msgParamEntityNoPermitido }}
    </button>
    <sgi-field-info matSuffix class="mat-icon-button" [visible]="!this.formPart.getKey()"
      message="{{'csp.convocatoria-concepto-gasto.msg' | translate}}">
    </sgi-field-info>
  </div>
</sgi-fragment>